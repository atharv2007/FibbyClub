{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AUTH_KEY = '@fibby_user';\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n\n    // Load user from AsyncStorage on mount\n    (0, _react.useEffect)(() => {\n      loadUser();\n    }, []);\n    const loadUser = async () => {\n      try {\n        const userJson = await AsyncStorage.default.getItem(AUTH_KEY);\n        if (userJson) {\n          const userData = JSON.parse(userJson);\n          setUser(userData);\n        }\n      } catch (error) {\n        console.error('Error loading user:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async userData => {\n      try {\n        await AsyncStorage.default.setItem(AUTH_KEY, JSON.stringify(userData));\n        setUser(userData);\n      } catch (error) {\n        console.error('Error saving user:', error);\n        throw error;\n      }\n    };\n    const logout = async () => {\n      try {\n        console.log('AuthContext: Starting logout...');\n        // Clear user from state first\n        setUser(null);\n\n        // Remove from AsyncStorage\n        await AsyncStorage.default.removeItem(AUTH_KEY);\n\n        // Clear all async storage for a clean logout (optional but thorough)\n        await AsyncStorage.default.clear();\n        console.log('AuthContext: Logout complete, user cleared');\n      } catch (error) {\n        console.error('Error during logout:', error);\n        // Even if there's an error, clear the user state\n        setUser(null);\n        throw error;\n      }\n    };\n    const value = {\n      user,\n      loading,\n      login,\n      logout,\n      isAuthenticated: !!user\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: value,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 10\n    }, this);\n  }\n  _s(AuthProvider, \"NiO5z6JIqzX62LS5UWDgIqbZYyY=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":104,"map":[[15,2,26,0,"exports"],[15,9,26,0],[15,10,26,0,"AuthProvider"],[15,22,26,0],[15,25,26,0,"AuthProvider"],[15,37,26,0],[16,2,91,0,"exports"],[16,9,91,0],[16,10,91,0,"useAuth"],[16,17,91,0],[16,20,91,0,"useAuth"],[16,27,91,0],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,2,0],[18,45,2,0,"require"],[18,52,2,0],[18,53,2,0,"_dependencyMap"],[18,67,2,0],[19,2,2,0],[19,6,2,0,"AsyncStorage"],[19,18,2,0],[19,21,2,0,"_interopDefault"],[19,36,2,0],[19,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,2,0],[20,2,2,69],[20,6,2,69,"_reactJsxDevRuntime"],[20,25,2,69],[20,28,2,69,"require"],[20,35,2,69],[20,36,2,69,"_dependencyMap"],[20,50,2,69],[21,2,22,0],[21,8,22,6,"AuthContext"],[21,19,22,17],[21,35,22,20],[21,39,22,20,"createContext"],[21,45,22,33],[21,46,22,33,"createContext"],[21,59,22,33],[21,61,22,63,"undefined"],[21,70,22,72],[21,71,22,73],[22,2,24,0],[22,8,24,6,"AUTH_KEY"],[22,16,24,14],[22,19,24,17],[22,32,24,30],[23,2,26,7],[23,11,26,16,"AuthProvider"],[23,23,26,28,"AuthProvider"],[23,24,26,29],[24,4,26,31,"children"],[25,2,26,71],[25,3,26,72],[25,5,26,74],[26,4,26,74,"_s"],[26,6,26,74],[27,4,27,2],[27,10,27,8],[27,11,27,9,"user"],[27,15,27,13],[27,17,27,15,"setUser"],[27,24,27,22],[27,25,27,23],[27,28,27,26],[27,32,27,26,"useState"],[27,38,27,34],[27,39,27,34,"useState"],[27,47,27,34],[27,49,27,48],[27,53,27,52],[27,54,27,53],[28,4,28,2],[28,10,28,8],[28,11,28,9,"loading"],[28,18,28,16],[28,20,28,18,"setLoading"],[28,30,28,28],[28,31,28,29],[28,34,28,32],[28,38,28,32,"useState"],[28,44,28,40],[28,45,28,40,"useState"],[28,53,28,40],[28,55,28,41],[28,59,28,45],[28,60,28,46],[30,4,30,2],[31,4,31,2],[31,8,31,2,"useEffect"],[31,14,31,11],[31,15,31,11,"useEffect"],[31,24,31,11],[31,26,31,12],[31,32,31,18],[32,6,32,4,"loadUser"],[32,14,32,12],[32,15,32,13],[32,16,32,14],[33,4,33,2],[33,5,33,3],[33,7,33,5],[33,9,33,7],[33,10,33,8],[34,4,35,2],[34,10,35,8,"loadUser"],[34,18,35,16],[34,21,35,19],[34,27,35,19,"loadUser"],[34,28,35,19],[34,33,35,31],[35,6,36,4],[35,10,36,8],[36,8,37,6],[36,14,37,12,"userJson"],[36,22,37,20],[36,25,37,23],[36,31,37,29,"AsyncStorage"],[36,43,37,41],[36,44,37,41,"default"],[36,51,37,41],[36,52,37,42,"getItem"],[36,59,37,49],[36,60,37,50,"AUTH_KEY"],[36,68,37,58],[36,69,37,59],[37,8,38,6],[37,12,38,10,"userJson"],[37,20,38,18],[37,22,38,20],[38,10,39,8],[38,16,39,14,"userData"],[38,24,39,22],[38,27,39,25,"JSON"],[38,31,39,29],[38,32,39,30,"parse"],[38,37,39,35],[38,38,39,36,"userJson"],[38,46,39,44],[38,47,39,45],[39,10,40,8,"setUser"],[39,17,40,15],[39,18,40,16,"userData"],[39,26,40,24],[39,27,40,25],[40,8,41,6],[41,6,42,4],[41,7,42,5],[41,8,42,6],[41,15,42,13,"error"],[41,20,42,18],[41,22,42,20],[42,8,43,6,"console"],[42,15,43,13],[42,16,43,14,"error"],[42,21,43,19],[42,22,43,20],[42,43,43,41],[42,45,43,43,"error"],[42,50,43,48],[42,51,43,49],[43,6,44,4],[43,7,44,5],[43,16,44,14],[44,8,45,6,"setLoading"],[44,18,45,16],[44,19,45,17],[44,24,45,22],[44,25,45,23],[45,6,46,4],[46,4,47,2],[46,5,47,3],[47,4,49,2],[47,10,49,8,"login"],[47,15,49,13],[47,18,49,16],[47,24,49,23,"userData"],[47,32,49,37],[47,36,49,42],[48,6,50,4],[48,10,50,8],[49,8,51,6],[49,14,51,12,"AsyncStorage"],[49,26,51,24],[49,27,51,24,"default"],[49,34,51,24],[49,35,51,25,"setItem"],[49,42,51,32],[49,43,51,33,"AUTH_KEY"],[49,51,51,41],[49,53,51,43,"JSON"],[49,57,51,47],[49,58,51,48,"stringify"],[49,67,51,57],[49,68,51,58,"userData"],[49,76,51,66],[49,77,51,67],[49,78,51,68],[50,8,52,6,"setUser"],[50,15,52,13],[50,16,52,14,"userData"],[50,24,52,22],[50,25,52,23],[51,6,53,4],[51,7,53,5],[51,8,53,6],[51,15,53,13,"error"],[51,20,53,18],[51,22,53,20],[52,8,54,6,"console"],[52,15,54,13],[52,16,54,14,"error"],[52,21,54,19],[52,22,54,20],[52,42,54,40],[52,44,54,42,"error"],[52,49,54,47],[52,50,54,48],[53,8,55,6],[53,14,55,12,"error"],[53,19,55,17],[54,6,56,4],[55,4,57,2],[55,5,57,3],[56,4,59,2],[56,10,59,8,"logout"],[56,16,59,14],[56,19,59,17],[56,25,59,17,"logout"],[56,26,59,17],[56,31,59,29],[57,6,60,4],[57,10,60,8],[58,8,61,6,"console"],[58,15,61,13],[58,16,61,14,"log"],[58,19,61,17],[58,20,61,18],[58,53,61,51],[58,54,61,52],[59,8,62,6],[60,8,63,6,"setUser"],[60,15,63,13],[60,16,63,14],[60,20,63,18],[60,21,63,19],[62,8,65,6],[63,8,66,6],[63,14,66,12,"AsyncStorage"],[63,26,66,24],[63,27,66,24,"default"],[63,34,66,24],[63,35,66,25,"removeItem"],[63,45,66,35],[63,46,66,36,"AUTH_KEY"],[63,54,66,44],[63,55,66,45],[65,8,68,6],[66,8,69,6],[66,14,69,12,"AsyncStorage"],[66,26,69,24],[66,27,69,24,"default"],[66,34,69,24],[66,35,69,25,"clear"],[66,40,69,30],[66,41,69,31],[66,42,69,32],[67,8,71,6,"console"],[67,15,71,13],[67,16,71,14,"log"],[67,19,71,17],[67,20,71,18],[67,64,71,62],[67,65,71,63],[68,6,72,4],[68,7,72,5],[68,8,72,6],[68,15,72,13,"error"],[68,20,72,18],[68,22,72,20],[69,8,73,6,"console"],[69,15,73,13],[69,16,73,14,"error"],[69,21,73,19],[69,22,73,20],[69,44,73,42],[69,46,73,44,"error"],[69,51,73,49],[69,52,73,50],[70,8,74,6],[71,8,75,6,"setUser"],[71,15,75,13],[71,16,75,14],[71,20,75,18],[71,21,75,19],[72,8,76,6],[72,14,76,12,"error"],[72,19,76,17],[73,6,77,4],[74,4,78,2],[74,5,78,3],[75,4,80,2],[75,10,80,8,"value"],[75,15,80,13],[75,18,80,16],[76,6,81,4,"user"],[76,10,81,8],[77,6,82,4,"loading"],[77,13,82,11],[78,6,83,4,"login"],[78,11,83,9],[79,6,84,4,"logout"],[79,12,84,10],[80,6,85,4,"isAuthenticated"],[80,21,85,19],[80,23,85,21],[80,24,85,22],[80,25,85,23,"user"],[81,4,86,2],[81,5,86,3],[82,4,88,2],[82,24,88,9],[82,28,88,9,"_reactJsxDevRuntime"],[82,47,88,9],[82,48,88,9,"jsxDEV"],[82,54,88,9],[82,56,88,10,"AuthContext"],[82,67,88,21],[82,68,88,22,"Provider"],[82,76,88,30],[83,6,88,31,"value"],[83,11,88,36],[83,13,88,38,"value"],[83,18,88,44],[84,6,88,44,"children"],[84,14,88,44],[84,16,88,46,"children"],[85,4,88,54],[86,6,88,54,"fileName"],[86,14,88,54],[86,16,88,54,"_jsxFileName"],[86,28,88,54],[87,6,88,54,"lineNumber"],[87,16,88,54],[88,6,88,54,"columnNumber"],[88,18,88,54],[89,4,88,54],[89,11,88,77],[89,12,88,78],[90,2,89,0],[91,2,89,1,"_s"],[91,4,89,1],[91,5,26,16,"AuthProvider"],[91,17,26,28],[92,2,26,28,"_c"],[92,4,26,28],[92,7,26,16,"AuthProvider"],[92,19,26,28],[93,2,91,7],[93,11,91,16,"useAuth"],[93,18,91,23,"useAuth"],[93,19,91,23],[93,21,91,26],[94,4,91,26,"_s2"],[94,7,91,26],[95,4,92,2],[95,10,92,8,"context"],[95,17,92,15],[95,20,92,18],[95,24,92,18,"useContext"],[95,30,92,28],[95,31,92,28,"useContext"],[95,41,92,28],[95,43,92,29,"AuthContext"],[95,54,92,40],[95,55,92,41],[96,4,93,2],[96,8,93,6,"context"],[96,15,93,13],[96,20,93,18,"undefined"],[96,29,93,27],[96,31,93,29],[97,6,94,4],[97,12,94,10],[97,16,94,14,"Error"],[97,21,94,19],[97,22,94,20],[97,67,94,65],[97,68,94,66],[98,4,95,2],[99,4,96,2],[99,11,96,9,"context"],[99,18,96,16],[100,2,97,0],[101,2,97,1,"_s2"],[101,5,97,1],[101,6,91,16,"useAuth"],[101,13,91,23],[102,2,91,23],[102,6,91,23,"_c"],[102,8,91,23],[103,2,91,23,"$RefreshReg$"],[103,14,91,23],[103,15,91,23,"_c"],[103,17,91,23],[104,0,91,23],[104,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadUser","login","logout","useAuth"],"mappings":"AAA;OCyB;YCK;GDE;mBEE;GFY;gBGE;GHQ;iBIE;GJmB;CDW;OME;CNM"},"hasCjsExports":false},"type":"js/module"}]}