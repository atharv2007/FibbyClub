{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AUTH_KEY = '@fibby_user';\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n\n    // Load user from AsyncStorage on mount\n    (0, _react.useEffect)(() => {\n      loadUser();\n    }, []);\n    const loadUser = async () => {\n      try {\n        const userJson = await AsyncStorage.default.getItem(AUTH_KEY);\n        if (userJson) {\n          const userData = JSON.parse(userJson);\n          setUser(userData);\n        }\n      } catch (error) {\n        console.error('Error loading user:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async userData => {\n      try {\n        await AsyncStorage.default.setItem(AUTH_KEY, JSON.stringify(userData));\n        setUser(userData);\n      } catch (error) {\n        console.error('Error saving user:', error);\n        throw error;\n      }\n    };\n    const logout = async () => {\n      try {\n        console.log('AuthContext: Starting logout...');\n        // Clear user from state first\n        setUser(null);\n\n        // Remove from AsyncStorage\n        await AsyncStorage.default.removeItem(AUTH_KEY);\n\n        // Clear all async storage for a clean logout (optional but thorough)\n        await AsyncStorage.default.clear();\n        console.log('AuthContext: Logout complete, user cleared');\n      } catch (error) {\n        console.error('Error during logout:', error);\n        // Even if there's an error, clear the user state\n        setUser(null);\n        throw error;\n      }\n    };\n    const value = {\n      user,\n      loading,\n      login,\n      logout,\n      isAuthenticated: !!user\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: value,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 10\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":95,"map":[[13,2,26,0,"exports"],[13,9,26,0],[13,10,26,0,"AuthProvider"],[13,22,26,0],[13,25,26,0,"AuthProvider"],[13,37,26,0],[14,2,91,0,"exports"],[14,9,91,0],[14,10,91,0,"useAuth"],[14,17,91,0],[14,20,91,0,"useAuth"],[14,27,91,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,2,69],[18,6,2,69,"_reactJsxDevRuntime"],[18,25,2,69],[18,28,2,69,"require"],[18,35,2,69],[18,36,2,69,"_dependencyMap"],[18,50,2,69],[19,2,22,0],[19,8,22,6,"AuthContext"],[19,19,22,17],[19,35,22,20],[19,39,22,20,"createContext"],[19,45,22,33],[19,46,22,33,"createContext"],[19,59,22,33],[19,61,22,63,"undefined"],[19,70,22,72],[19,71,22,73],[20,2,24,0],[20,8,24,6,"AUTH_KEY"],[20,16,24,14],[20,19,24,17],[20,32,24,30],[21,2,26,7],[21,11,26,16,"AuthProvider"],[21,23,26,28,"AuthProvider"],[21,24,26,29],[22,4,26,31,"children"],[23,2,26,71],[23,3,26,72],[23,5,26,74],[24,4,27,2],[24,10,27,8],[24,11,27,9,"user"],[24,15,27,13],[24,17,27,15,"setUser"],[24,24,27,22],[24,25,27,23],[24,28,27,26],[24,32,27,26,"useState"],[24,38,27,34],[24,39,27,34,"useState"],[24,47,27,34],[24,49,27,48],[24,53,27,52],[24,54,27,53],[25,4,28,2],[25,10,28,8],[25,11,28,9,"loading"],[25,18,28,16],[25,20,28,18,"setLoading"],[25,30,28,28],[25,31,28,29],[25,34,28,32],[25,38,28,32,"useState"],[25,44,28,40],[25,45,28,40,"useState"],[25,53,28,40],[25,55,28,41],[25,59,28,45],[25,60,28,46],[27,4,30,2],[28,4,31,2],[28,8,31,2,"useEffect"],[28,14,31,11],[28,15,31,11,"useEffect"],[28,24,31,11],[28,26,31,12],[28,32,31,18],[29,6,32,4,"loadUser"],[29,14,32,12],[29,15,32,13],[29,16,32,14],[30,4,33,2],[30,5,33,3],[30,7,33,5],[30,9,33,7],[30,10,33,8],[31,4,35,2],[31,10,35,8,"loadUser"],[31,18,35,16],[31,21,35,19],[31,27,35,19,"loadUser"],[31,28,35,19],[31,33,35,31],[32,6,36,4],[32,10,36,8],[33,8,37,6],[33,14,37,12,"userJson"],[33,22,37,20],[33,25,37,23],[33,31,37,29,"AsyncStorage"],[33,43,37,41],[33,44,37,41,"default"],[33,51,37,41],[33,52,37,42,"getItem"],[33,59,37,49],[33,60,37,50,"AUTH_KEY"],[33,68,37,58],[33,69,37,59],[34,8,38,6],[34,12,38,10,"userJson"],[34,20,38,18],[34,22,38,20],[35,10,39,8],[35,16,39,14,"userData"],[35,24,39,22],[35,27,39,25,"JSON"],[35,31,39,29],[35,32,39,30,"parse"],[35,37,39,35],[35,38,39,36,"userJson"],[35,46,39,44],[35,47,39,45],[36,10,40,8,"setUser"],[36,17,40,15],[36,18,40,16,"userData"],[36,26,40,24],[36,27,40,25],[37,8,41,6],[38,6,42,4],[38,7,42,5],[38,8,42,6],[38,15,42,13,"error"],[38,20,42,18],[38,22,42,20],[39,8,43,6,"console"],[39,15,43,13],[39,16,43,14,"error"],[39,21,43,19],[39,22,43,20],[39,43,43,41],[39,45,43,43,"error"],[39,50,43,48],[39,51,43,49],[40,6,44,4],[40,7,44,5],[40,16,44,14],[41,8,45,6,"setLoading"],[41,18,45,16],[41,19,45,17],[41,24,45,22],[41,25,45,23],[42,6,46,4],[43,4,47,2],[43,5,47,3],[44,4,49,2],[44,10,49,8,"login"],[44,15,49,13],[44,18,49,16],[44,24,49,23,"userData"],[44,32,49,37],[44,36,49,42],[45,6,50,4],[45,10,50,8],[46,8,51,6],[46,14,51,12,"AsyncStorage"],[46,26,51,24],[46,27,51,24,"default"],[46,34,51,24],[46,35,51,25,"setItem"],[46,42,51,32],[46,43,51,33,"AUTH_KEY"],[46,51,51,41],[46,53,51,43,"JSON"],[46,57,51,47],[46,58,51,48,"stringify"],[46,67,51,57],[46,68,51,58,"userData"],[46,76,51,66],[46,77,51,67],[46,78,51,68],[47,8,52,6,"setUser"],[47,15,52,13],[47,16,52,14,"userData"],[47,24,52,22],[47,25,52,23],[48,6,53,4],[48,7,53,5],[48,8,53,6],[48,15,53,13,"error"],[48,20,53,18],[48,22,53,20],[49,8,54,6,"console"],[49,15,54,13],[49,16,54,14,"error"],[49,21,54,19],[49,22,54,20],[49,42,54,40],[49,44,54,42,"error"],[49,49,54,47],[49,50,54,48],[50,8,55,6],[50,14,55,12,"error"],[50,19,55,17],[51,6,56,4],[52,4,57,2],[52,5,57,3],[53,4,59,2],[53,10,59,8,"logout"],[53,16,59,14],[53,19,59,17],[53,25,59,17,"logout"],[53,26,59,17],[53,31,59,29],[54,6,60,4],[54,10,60,8],[55,8,61,6,"console"],[55,15,61,13],[55,16,61,14,"log"],[55,19,61,17],[55,20,61,18],[55,53,61,51],[55,54,61,52],[56,8,62,6],[57,8,63,6,"setUser"],[57,15,63,13],[57,16,63,14],[57,20,63,18],[57,21,63,19],[59,8,65,6],[60,8,66,6],[60,14,66,12,"AsyncStorage"],[60,26,66,24],[60,27,66,24,"default"],[60,34,66,24],[60,35,66,25,"removeItem"],[60,45,66,35],[60,46,66,36,"AUTH_KEY"],[60,54,66,44],[60,55,66,45],[62,8,68,6],[63,8,69,6],[63,14,69,12,"AsyncStorage"],[63,26,69,24],[63,27,69,24,"default"],[63,34,69,24],[63,35,69,25,"clear"],[63,40,69,30],[63,41,69,31],[63,42,69,32],[64,8,71,6,"console"],[64,15,71,13],[64,16,71,14,"log"],[64,19,71,17],[64,20,71,18],[64,64,71,62],[64,65,71,63],[65,6,72,4],[65,7,72,5],[65,8,72,6],[65,15,72,13,"error"],[65,20,72,18],[65,22,72,20],[66,8,73,6,"console"],[66,15,73,13],[66,16,73,14,"error"],[66,21,73,19],[66,22,73,20],[66,44,73,42],[66,46,73,44,"error"],[66,51,73,49],[66,52,73,50],[67,8,74,6],[68,8,75,6,"setUser"],[68,15,75,13],[68,16,75,14],[68,20,75,18],[68,21,75,19],[69,8,76,6],[69,14,76,12,"error"],[69,19,76,17],[70,6,77,4],[71,4,78,2],[71,5,78,3],[72,4,80,2],[72,10,80,8,"value"],[72,15,80,13],[72,18,80,16],[73,6,81,4,"user"],[73,10,81,8],[74,6,82,4,"loading"],[74,13,82,11],[75,6,83,4,"login"],[75,11,83,9],[76,6,84,4,"logout"],[76,12,84,10],[77,6,85,4,"isAuthenticated"],[77,21,85,19],[77,23,85,21],[77,24,85,22],[77,25,85,23,"user"],[78,4,86,2],[78,5,86,3],[79,4,88,2],[79,24,88,9],[79,28,88,9,"_reactJsxDevRuntime"],[79,47,88,9],[79,48,88,9,"jsxDEV"],[79,54,88,9],[79,56,88,10,"AuthContext"],[79,67,88,21],[79,68,88,22,"Provider"],[79,76,88,30],[80,6,88,31,"value"],[80,11,88,36],[80,13,88,38,"value"],[80,18,88,44],[81,6,88,44,"children"],[81,14,88,44],[81,16,88,46,"children"],[82,4,88,54],[83,6,88,54,"fileName"],[83,14,88,54],[83,16,88,54,"_jsxFileName"],[83,28,88,54],[84,6,88,54,"lineNumber"],[84,16,88,54],[85,6,88,54,"columnNumber"],[85,18,88,54],[86,4,88,54],[86,11,88,77],[86,12,88,78],[87,2,89,0],[88,2,91,7],[88,11,91,16,"useAuth"],[88,18,91,23,"useAuth"],[88,19,91,23],[88,21,91,26],[89,4,92,2],[89,10,92,8,"context"],[89,17,92,15],[89,20,92,18],[89,24,92,18,"useContext"],[89,30,92,28],[89,31,92,28,"useContext"],[89,41,92,28],[89,43,92,29,"AuthContext"],[89,54,92,40],[89,55,92,41],[90,4,93,2],[90,8,93,6,"context"],[90,15,93,13],[90,20,93,18,"undefined"],[90,29,93,27],[90,31,93,29],[91,6,94,4],[91,12,94,10],[91,16,94,14,"Error"],[91,21,94,19],[91,22,94,20],[91,67,94,65],[91,68,94,66],[92,4,95,2],[93,4,96,2],[93,11,96,9,"context"],[93,18,96,16],[94,2,97,0],[95,0,97,1],[95,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadUser","login","logout","useAuth"],"mappings":"AAA;OCyB;YCK;GDE;mBEE;GFY;gBGE;GHQ;iBIE;GJmB;CDW;OME;CNM"},"hasCjsExports":false},"type":"js/module"}]}