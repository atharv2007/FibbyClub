{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[3], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  var AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  var AUTH_KEY = '@fibby_user';\n  function AuthProvider(_ref) {\n    _s();\n    var children = _ref.children;\n    var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n    var _useState3 = (0, _react.useState)(true),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n    // Load user from AsyncStorage on mount\n    (0, _react.useEffect)(() => {\n      loadUser();\n    }, []);\n    var loadUser = /*#__PURE__*/function () {\n      var _ref2 = (0, _asyncToGenerator.default)(function* () {\n        try {\n          var userJson = yield AsyncStorage.default.getItem(AUTH_KEY);\n          if (userJson) {\n            var userData = JSON.parse(userJson);\n            setUser(userData);\n          }\n        } catch (error) {\n          console.error('Error loading user:', error);\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function loadUser() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    var login = /*#__PURE__*/function () {\n      var _ref3 = (0, _asyncToGenerator.default)(function* (userData) {\n        try {\n          yield AsyncStorage.default.setItem(AUTH_KEY, JSON.stringify(userData));\n          setUser(userData);\n        } catch (error) {\n          console.error('Error saving user:', error);\n          throw error;\n        }\n      });\n      return function login(_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    var logout = /*#__PURE__*/function () {\n      var _ref4 = (0, _asyncToGenerator.default)(function* () {\n        try {\n          console.log('AuthContext: Starting logout...');\n          // Clear user from state first\n          setUser(null);\n\n          // Remove from AsyncStorage\n          yield AsyncStorage.default.removeItem(AUTH_KEY);\n\n          // Clear all async storage for a clean logout (optional but thorough)\n          yield AsyncStorage.default.clear();\n          console.log('AuthContext: Logout complete, user cleared');\n        } catch (error) {\n          console.error('Error during logout:', error);\n          // Even if there's an error, clear the user state\n          setUser(null);\n          throw error;\n        }\n      });\n      return function logout() {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n    var value = {\n      user,\n      loading,\n      login,\n      logout,\n      isAuthenticated: !!user\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: value,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 10\n    }, this);\n  }\n  _s(AuthProvider, \"NiO5z6JIqzX62LS5UWDgIqbZYyY=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    var context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":128,"map":[[15,2,26,0,"exports"],[15,9,26,0],[15,10,26,0,"AuthProvider"],[15,22,26,0],[15,25,26,0,"AuthProvider"],[15,37,26,0],[16,2,91,0,"exports"],[16,9,91,0],[16,10,91,0,"useAuth"],[16,17,91,0],[16,20,91,0,"useAuth"],[16,27,91,0],[17,2,97,1],[17,6,97,1,"_babelRuntimeHelpersAsyncToGenerator"],[17,42,97,1],[17,45,97,1,"require"],[17,52,97,1],[17,53,97,1,"_dependencyMap"],[17,67,97,1],[18,2,97,1],[18,6,97,1,"_asyncToGenerator"],[18,23,97,1],[18,26,97,1,"_interopDefault"],[18,41,97,1],[18,42,97,1,"_babelRuntimeHelpersAsyncToGenerator"],[18,78,97,1],[19,2,97,1],[19,6,97,1,"_babelRuntimeHelpersSlicedToArray"],[19,39,97,1],[19,42,97,1,"require"],[19,49,97,1],[19,50,97,1,"_dependencyMap"],[19,64,97,1],[20,2,97,1],[20,6,97,1,"_slicedToArray"],[20,20,97,1],[20,23,97,1,"_interopDefault"],[20,38,97,1],[20,39,97,1,"_babelRuntimeHelpersSlicedToArray"],[20,72,97,1],[21,2,1,0],[21,6,1,0,"_react"],[21,12,1,0],[21,15,1,0,"require"],[21,22,1,0],[21,23,1,0,"_dependencyMap"],[21,37,1,0],[22,2,2,0],[22,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[22,42,2,0],[22,45,2,0,"require"],[22,52,2,0],[22,53,2,0,"_dependencyMap"],[22,67,2,0],[23,2,2,0],[23,6,2,0,"AsyncStorage"],[23,18,2,0],[23,21,2,0,"_interopDefault"],[23,36,2,0],[23,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[23,73,2,0],[24,2,2,69],[24,6,2,69,"_reactJsxDevRuntime"],[24,25,2,69],[24,28,2,69,"require"],[24,35,2,69],[24,36,2,69,"_dependencyMap"],[24,50,2,69],[25,2,22,0],[25,6,22,6,"AuthContext"],[25,17,22,17],[25,33,22,20],[25,37,22,20,"createContext"],[25,43,22,33],[25,44,22,33,"createContext"],[25,57,22,33],[25,59,22,63,"undefined"],[25,68,22,72],[25,69,22,73],[26,2,24,0],[26,6,24,6,"AUTH_KEY"],[26,14,24,14],[26,17,24,17],[26,30,24,30],[27,2,26,7],[27,11,26,16,"AuthProvider"],[27,23,26,28,"AuthProvider"],[27,24,26,28,"_ref"],[27,28,26,28],[27,30,26,74],[28,4,26,74,"_s"],[28,6,26,74],[29,4,26,74],[29,8,26,31,"children"],[29,16,26,39],[29,19,26,39,"_ref"],[29,23,26,39],[29,24,26,31,"children"],[29,32,26,39],[30,4,27,2],[30,8,27,2,"_useState"],[30,17,27,2],[30,20,27,26],[30,24,27,26,"useState"],[30,30,27,34],[30,31,27,34,"useState"],[30,39,27,34],[30,41,27,48],[30,45,27,52],[30,46,27,53],[31,6,27,53,"_useState2"],[31,16,27,53],[31,23,27,53,"_slicedToArray"],[31,37,27,53],[31,38,27,53,"default"],[31,45,27,53],[31,47,27,53,"_useState"],[31,56,27,53],[32,6,27,9,"user"],[32,10,27,13],[32,13,27,13,"_useState2"],[32,23,27,13],[33,6,27,15,"setUser"],[33,13,27,22],[33,16,27,22,"_useState2"],[33,26,27,22],[34,4,28,2],[34,8,28,2,"_useState3"],[34,18,28,2],[34,21,28,32],[34,25,28,32,"useState"],[34,31,28,40],[34,32,28,40,"useState"],[34,40,28,40],[34,42,28,41],[34,46,28,45],[34,47,28,46],[35,6,28,46,"_useState4"],[35,16,28,46],[35,23,28,46,"_slicedToArray"],[35,37,28,46],[35,38,28,46,"default"],[35,45,28,46],[35,47,28,46,"_useState3"],[35,57,28,46],[36,6,28,9,"loading"],[36,13,28,16],[36,16,28,16,"_useState4"],[36,26,28,16],[37,6,28,18,"setLoading"],[37,16,28,28],[37,19,28,28,"_useState4"],[37,29,28,28],[39,4,30,2],[40,4,31,2],[40,8,31,2,"useEffect"],[40,14,31,11],[40,15,31,11,"useEffect"],[40,24,31,11],[40,26,31,12],[40,32,31,18],[41,6,32,4,"loadUser"],[41,14,32,12],[41,15,32,13],[41,16,32,14],[42,4,33,2],[42,5,33,3],[42,7,33,5],[42,9,33,7],[42,10,33,8],[43,4,35,2],[43,8,35,8,"loadUser"],[43,16,35,16],[44,6,35,16],[44,10,35,16,"_ref2"],[44,15,35,16],[44,22,35,16,"_asyncToGenerator"],[44,39,35,16],[44,40,35,16,"default"],[44,47,35,16],[44,49,35,19],[44,62,35,31],[45,8,36,4],[45,12,36,8],[46,10,37,6],[46,14,37,12,"userJson"],[46,22,37,20],[46,31,37,29,"AsyncStorage"],[46,43,37,41],[46,44,37,41,"default"],[46,51,37,41],[46,52,37,42,"getItem"],[46,59,37,49],[46,60,37,50,"AUTH_KEY"],[46,68,37,58],[46,69,37,59],[47,10,38,6],[47,14,38,10,"userJson"],[47,22,38,18],[47,24,38,20],[48,12,39,8],[48,16,39,14,"userData"],[48,24,39,22],[48,27,39,25,"JSON"],[48,31,39,29],[48,32,39,30,"parse"],[48,37,39,35],[48,38,39,36,"userJson"],[48,46,39,44],[48,47,39,45],[49,12,40,8,"setUser"],[49,19,40,15],[49,20,40,16,"userData"],[49,28,40,24],[49,29,40,25],[50,10,41,6],[51,8,42,4],[51,9,42,5],[51,10,42,6],[51,17,42,13,"error"],[51,22,42,18],[51,24,42,20],[52,10,43,6,"console"],[52,17,43,13],[52,18,43,14,"error"],[52,23,43,19],[52,24,43,20],[52,45,43,41],[52,47,43,43,"error"],[52,52,43,48],[52,53,43,49],[53,8,44,4],[53,9,44,5],[53,18,44,14],[54,10,45,6,"setLoading"],[54,20,45,16],[54,21,45,17],[54,26,45,22],[54,27,45,23],[55,8,46,4],[56,6,47,2],[56,7,47,3],[57,6,47,3],[57,22,35,8,"loadUser"],[57,30,35,16,"loadUser"],[57,31,35,16],[58,8,35,16],[58,15,35,16,"_ref2"],[58,20,35,16],[58,21,35,16,"apply"],[58,26,35,16],[58,33,35,16,"arguments"],[58,42,35,16],[59,6,35,16],[60,4,35,16],[60,7,47,3],[61,4,49,2],[61,8,49,8,"login"],[61,13,49,13],[62,6,49,13],[62,10,49,13,"_ref3"],[62,15,49,13],[62,22,49,13,"_asyncToGenerator"],[62,39,49,13],[62,40,49,13,"default"],[62,47,49,13],[62,49,49,16],[62,60,49,23,"userData"],[62,68,49,37],[62,70,49,42],[63,8,50,4],[63,12,50,8],[64,10,51,6],[64,16,51,12,"AsyncStorage"],[64,28,51,24],[64,29,51,24,"default"],[64,36,51,24],[64,37,51,25,"setItem"],[64,44,51,32],[64,45,51,33,"AUTH_KEY"],[64,53,51,41],[64,55,51,43,"JSON"],[64,59,51,47],[64,60,51,48,"stringify"],[64,69,51,57],[64,70,51,58,"userData"],[64,78,51,66],[64,79,51,67],[64,80,51,68],[65,10,52,6,"setUser"],[65,17,52,13],[65,18,52,14,"userData"],[65,26,52,22],[65,27,52,23],[66,8,53,4],[66,9,53,5],[66,10,53,6],[66,17,53,13,"error"],[66,22,53,18],[66,24,53,20],[67,10,54,6,"console"],[67,17,54,13],[67,18,54,14,"error"],[67,23,54,19],[67,24,54,20],[67,44,54,40],[67,46,54,42,"error"],[67,51,54,47],[67,52,54,48],[68,10,55,6],[68,16,55,12,"error"],[68,21,55,17],[69,8,56,4],[70,6,57,2],[70,7,57,3],[71,6,57,3],[71,22,49,8,"login"],[71,27,49,13,"login"],[71,28,49,13,"_x"],[71,30,49,13],[72,8,49,13],[72,15,49,13,"_ref3"],[72,20,49,13],[72,21,49,13,"apply"],[72,26,49,13],[72,33,49,13,"arguments"],[72,42,49,13],[73,6,49,13],[74,4,49,13],[74,7,57,3],[75,4,59,2],[75,8,59,8,"logout"],[75,14,59,14],[76,6,59,14],[76,10,59,14,"_ref4"],[76,15,59,14],[76,22,59,14,"_asyncToGenerator"],[76,39,59,14],[76,40,59,14,"default"],[76,47,59,14],[76,49,59,17],[76,62,59,29],[77,8,60,4],[77,12,60,8],[78,10,61,6,"console"],[78,17,61,13],[78,18,61,14,"log"],[78,21,61,17],[78,22,61,18],[78,55,61,51],[78,56,61,52],[79,10,62,6],[80,10,63,6,"setUser"],[80,17,63,13],[80,18,63,14],[80,22,63,18],[80,23,63,19],[82,10,65,6],[83,10,66,6],[83,16,66,12,"AsyncStorage"],[83,28,66,24],[83,29,66,24,"default"],[83,36,66,24],[83,37,66,25,"removeItem"],[83,47,66,35],[83,48,66,36,"AUTH_KEY"],[83,56,66,44],[83,57,66,45],[85,10,68,6],[86,10,69,6],[86,16,69,12,"AsyncStorage"],[86,28,69,24],[86,29,69,24,"default"],[86,36,69,24],[86,37,69,25,"clear"],[86,42,69,30],[86,43,69,31],[86,44,69,32],[87,10,71,6,"console"],[87,17,71,13],[87,18,71,14,"log"],[87,21,71,17],[87,22,71,18],[87,66,71,62],[87,67,71,63],[88,8,72,4],[88,9,72,5],[88,10,72,6],[88,17,72,13,"error"],[88,22,72,18],[88,24,72,20],[89,10,73,6,"console"],[89,17,73,13],[89,18,73,14,"error"],[89,23,73,19],[89,24,73,20],[89,46,73,42],[89,48,73,44,"error"],[89,53,73,49],[89,54,73,50],[90,10,74,6],[91,10,75,6,"setUser"],[91,17,75,13],[91,18,75,14],[91,22,75,18],[91,23,75,19],[92,10,76,6],[92,16,76,12,"error"],[92,21,76,17],[93,8,77,4],[94,6,78,2],[94,7,78,3],[95,6,78,3],[95,22,59,8,"logout"],[95,28,59,14,"logout"],[95,29,59,14],[96,8,59,14],[96,15,59,14,"_ref4"],[96,20,59,14],[96,21,59,14,"apply"],[96,26,59,14],[96,33,59,14,"arguments"],[96,42,59,14],[97,6,59,14],[98,4,59,14],[98,7,78,3],[99,4,80,2],[99,8,80,8,"value"],[99,13,80,13],[99,16,80,16],[100,6,81,4,"user"],[100,10,81,8],[101,6,82,4,"loading"],[101,13,82,11],[102,6,83,4,"login"],[102,11,83,9],[103,6,84,4,"logout"],[103,12,84,10],[104,6,85,4,"isAuthenticated"],[104,21,85,19],[104,23,85,21],[104,24,85,22],[104,25,85,23,"user"],[105,4,86,2],[105,5,86,3],[106,4,88,2],[106,24,88,9],[106,28,88,9,"_reactJsxDevRuntime"],[106,47,88,9],[106,48,88,9,"jsxDEV"],[106,54,88,9],[106,56,88,10,"AuthContext"],[106,67,88,21],[106,68,88,22,"Provider"],[106,76,88,30],[107,6,88,31,"value"],[107,11,88,36],[107,13,88,38,"value"],[107,18,88,44],[108,6,88,44,"children"],[108,14,88,44],[108,16,88,46,"children"],[109,4,88,54],[110,6,88,54,"fileName"],[110,14,88,54],[110,16,88,54,"_jsxFileName"],[110,28,88,54],[111,6,88,54,"lineNumber"],[111,16,88,54],[112,6,88,54,"columnNumber"],[112,18,88,54],[113,4,88,54],[113,11,88,77],[113,12,88,78],[114,2,89,0],[115,2,89,1,"_s"],[115,4,89,1],[115,5,26,16,"AuthProvider"],[115,17,26,28],[116,2,26,28,"_c"],[116,4,26,28],[116,7,26,16,"AuthProvider"],[116,19,26,28],[117,2,91,7],[117,11,91,16,"useAuth"],[117,18,91,23,"useAuth"],[117,19,91,23],[117,21,91,26],[118,4,91,26,"_s2"],[118,7,91,26],[119,4,92,2],[119,8,92,8,"context"],[119,15,92,15],[119,18,92,18],[119,22,92,18,"useContext"],[119,28,92,28],[119,29,92,28,"useContext"],[119,39,92,28],[119,41,92,29,"AuthContext"],[119,52,92,40],[119,53,92,41],[120,4,93,2],[120,8,93,6,"context"],[120,15,93,13],[120,20,93,18,"undefined"],[120,29,93,27],[120,31,93,29],[121,6,94,4],[121,12,94,10],[121,16,94,14,"Error"],[121,21,94,19],[121,22,94,20],[121,67,94,65],[121,68,94,66],[122,4,95,2],[123,4,96,2],[123,11,96,9,"context"],[123,18,96,16],[124,2,97,0],[125,2,97,1,"_s2"],[125,5,97,1],[125,6,91,16,"useAuth"],[125,13,91,23],[126,2,91,23],[126,6,91,23,"_c"],[126,8,91,23],[127,2,91,23,"$RefreshReg$"],[127,14,91,23],[127,15,91,23,"_c"],[127,17,91,23],[128,0,91,23],[128,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadUser","login","logout","useAuth"],"mappings":"AAA;OCyB;YCK;GDE;mBEE;GFY;gBGE;GHQ;iBIE;GJmB;CDW;OME;CNM"},"hasCjsExports":false},"type":"js/module"}]}